{% load questions %}

<form action="/overview/forms/survey/"
      method="post"
      id="survey_form"
      class="form">
    {% csrf_token %}
    <div id="survey_inputs" class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">Star rating at top</h4>
            <button type="button" class="btn-close"
                    onclick="hideForm('#survey_form', false)"></button>
        </div>
        {{ survey_form.library_name }}
        {{ survey_form.session_key }}
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.general_rating.id_for_label }}">
                {% if familiar and familiar == True %}
                    {% general_rating_familiar %}
                {% else %}
                    {% general_rating_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.general_rating %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">Documented Library Tasks</h4>
        </div>
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.task_list.id_for_label }}">
                {% if familiar and familiar == True %}
                    {% task_list_familiar %}
                {% else %}
                    {% task_list_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.task_list %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">Methods with Code Examples</h4>
        </div>
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.code_examples_methods.id_for_label }}">
                {% if familiar and familiar == True %}
                    {% method_examples_familiar %}
                {% else %}
                    {% method_examples_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.code_examples_methods %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">Classes with Code Examples</h4>
        </div>
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.code_examples_classes.id_for_label }}">
                {% if familiar and familiar == True %}
                    {% class_examples_familiar %}
                {% else %}
                    {% class_examples_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.code_examples_classes %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">Readability of text</h4>
        </div>
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.text_readability.id_for_label }}">
                {% if familiar and familiar == True %}
                    {% text_readability_familiar %}
                {% else %}
                    {% text_readability_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.text_readability %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">Readability of code examples</h4>
        </div>
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.code_readability.id_for_label }}">
                {% if familiar and familiar == True %}
                    {% code_readability_familiar %}
                {% else %}
                    {% code_readability_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.code_readability %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">Documentation/Source code similarity</h4>
        </div>
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.consistency.id_for_label }}">
                {% if familiar and familiar == True %}
                    {% consistency_familiar %}
                {% else %}
                    {% consistency_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.consistency %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">Navigation Rating</h4>
        </div>
        <div class="form-group col-md-9">
            <label class="question"
                   for="{{ form.navigability.id_for_label }}">
                {% if familiar and familiar == False %}
                    {% navigability_familiar %}
                {% else %}
                    {% navigability_not_familiar %}
                {% endif %}
            </label>
            {% for choice in form.navigability %}
                {{ choice }}
            {% endfor %}
        </div>
        <div class="modal-header">
            <h4 class="modal-title">General Feedback</h4>
        </div>
        <div class="form-group col">
            <label class="question" for="{{ form.usefulness.id_for_label }}">
                {% general_useful %}
            </label>
            {{ form.usefulness }}
        </div>
        <div class="form-group col">
            <label class="question" for="{{ form.where_see.id_for_label }}">
                {% where_see %}
            </label>
            <select id="{{ form.where_see.id_for_label }}"
                    name="{{ form.where_see.name }}"
                    onchange="checkOption({{ form.where_see.id_for_label }})"
                    style="float: left; width: auto">
                {% for choice in form.where_see.field.choices %}
                    <option value="{{ choice.0 }}"
                            {% if form.where_see.value == choice.0 %}
                            selected="selected"
                            {% endif %}>
                        {{ choice.1 }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <input id="{{ form.where_see.id_for_label }}"
               name="{{ form.where_see.name }}"
               class="custom_where"
               disabled
               style="display: none; float:none; height: 25px"
               placeholder="Please specify"
               value="{{ form.where_see.value }}"
        />
        <div class="form-group col">
            <label class="question"
                   for="{{ form.general_feedback.id_for_label }}">
                {% additional_feedback %}
            </label>
            {{ form.general_feedback }}
        </div>
    </div>
    <div id="submit_message"
         style="display: none; color: forestgreen; font-size: 1.5rem;">
        Form submitted!
    </div>
    <div class="col" style="text-align: right;padding: .75rem">
        <button type="button"
                class="btn btn-secondary is-fullwidth is-medium"
                onclick="hideForm('#survey_form', true)">
            Close
        </button>
        <button id="survey_submit"
                type="submit"
                form="survey_form"
                value="Submit"
                class="btn btn-primary is-success is-fullwidth is-medium"
                onclick="(() => {
                                $('#survey_inputs')[0].style.display = 'none';
                                $('#survey_submit')[0].style.visibility = 'hidden';
                                $('#submit_message')[0].style.display = 'block';
                             })()">
            Submit
        </button>
    </div>
</form>
<script>
    changeWhereSee("#{{ form.where_see.id_for_label }}")
    $("survey_form").submit(function (event) {
        event.preventDefault();
    });
</script>
